@import "tailwindcss";
@import "./tokens/_variables.css";
@source "../blocks/**/*.{js,css}";
@source "../pages/**/*.html";

@layer theme {
	@theme {
		/** COLOR MAPPINGS
		 *  Map semantic tokens to Tailwind UI roles
		 */
		--color-transparent: transparent;
		--color-primary: var(--brand-primary);
		--color-primary-hover: var(--brand-primary-muted);
		--color-primary-pressed: var(--brand-primary-soft);
		--color-primary-disabled: var(--color-border-muted);
		--color-secondary: var(--brand-secondary);
		--color-secondary-hover: var(--brand-secondary-muted);
		--color-secondary-pressed: var(--brand-secondary-soft);
		--color-secondary-disabled: var(--color-border-muted);
		--color-accent: var(--brand-tertiary);
		--color-accent-hover: var(--brand-tertiary-muted);
		--color-accent-pressed: var(--brand-tertiary-soft);
		--color-accent-disabled: var(--color-border-muted);
		--color-muted: var(--color-surface-muted);
		--color-muted-hover: var(--color-surface-soft);
		--color-muted-pressed: var(--color-surface);
		--color-muted-disabled: var(--color-border-soft);

		/** FOREGROUND ROLES */
		--color-fg: var(--color-text);
		--color-fg-muted: var(--color-text-muted);
		--color-fg-soft: var(--color-text-soft);
		--color-fg-inverse: var(--color-canvas);
		--color-canvastext: var(--color-text);
		--color-canvastext-hover: var(--color-text-muted);
		--color-canvastext-pressed: var(--color-text-soft);
		--color-canvastext-disabled: var(--color-border-muted);

		/** BACKGROUND ROLES */
		--color-bg: var(--color-canvas);
		--color-bg-surface: var(--color-surface);
		--color-bg-muted: var(--color-surface-muted);
		--color-bg-inverse: var(--brand-primary);
		--bg-depth-1: var(--color-surface-muted);
		--bg-depth-2: var(--color-surface-soft);

		/** SURFACE ROLES */
		--color-surface-primary: var(--brand-primary);
		--color-surface-secondary: var(--brand-secondary);
		--color-surface-accent: var(--brand-tertiary);

		/** BORDER ROLES */
		--color-border-strong: var(--color-border-muted);
		--color-border-medium: var(--color-border);
		--color-border-soft: var(--color-border-soft);

		/** OVERLAY ROLES */
		--overlay-1: rgb(var(--args-canvas-inverted) / 0.12);
		--overlay-2: rgb(var(--args-canvas-inverted) / 0.48);
		--overlay-3: rgb(var(--args-canvas-inverted) / 0.8);

		/** SELECTION & FOCUS */
		--selection-fg: var(--color-canvas);
		--selection-bg: var(--brand-secondary);
		--focus-ring: var(--brand-secondary);
		--color-focus-ring: var(--brand-secondary);
		--color-selection-fg: var(--color-canvas);
		--color-selection-bg: var(--brand-secondary);

		/** STATUS TOKENS - Error */
		--status-error-fg: rgb(180 60 60);
		--status-error-bg: rgb(254 242 242);
		--status-error-border: rgb(252 165 165);
		--status-error-ring: rgb(239 68 68 / 0.4);
		--status-error-text: rgb(153 27 27);

		/** STATUS TOKENS - Success */
		--status-success-fg: rgb(34 197 94);
		--status-success-bg: rgb(240 253 244);
		--status-success-border: rgb(134 239 172);
		--status-success-ring: rgb(34 197 94 / 0.4);
		--status-success-text: rgb(21 128 61);

		/** STATUS TOKENS - Warning */
		--status-warning-fg: rgb(234 179 8);
		--status-warning-bg: rgb(254 252 232);
		--status-warning-border: rgb(253 224 71);
		--status-warning-ring: rgb(234 179 8 / 0.4);
		--status-warning-text: rgb(161 98 7);

		/** STATUS TOKENS - Info */
		--status-info-fg: rgb(59 130 246);
		--status-info-bg: rgb(239 246 255);
		--status-info-border: rgb(147 197 253);
		--status-info-ring: rgb(59 130 246 / 0.4);
		--status-info-text: rgb(30 64 175);

		/** BUTTON TOKENS - Solid */
		--btn-solid-fg: var(--color-canvas);
		--btn-solid-bg: var(--brand-primary);
		--btn-solid-bg-hover: var(--brand-primary-muted);
		--btn-solid-bg-active: var(--brand-primary-soft);
		--btn-solid-bg-pressed: var(--brand-primary-soft);
		--btn-solid-bg-disabled: var(--color-border-muted);
		--btn-solid-border: var(--brand-primary);

		/** BUTTON TOKENS - Outline */
		--btn-outline-fg: var(--brand-primary);
		--btn-outline-bg: transparent;
		--btn-outline-bg-hover: var(--brand-primary-soft);
		--btn-outline-bg-pressed: var(--brand-primary-muted);
		--btn-outline-bg-active: var(--brand-primary-muted);
		--btn-outline-border: var(--brand-primary);
		--btn-outline-border-hover: var(--brand-primary-muted);

		/** BUTTON TOKENS - Subtle */
		--btn-subtle-fg: var(--brand-primary);
		--btn-subtle-bg: var(--color-surface-muted);
		--btn-subtle-bg-hover: var(--color-surface-soft);
		--btn-subtle-bg-pressed: var(--color-surface);

		/** INPUT TOKENS */
		--input-fg: var(--color-text);
		--input-bg: var(--color-surface);
		--input-border: var(--color-border);
		--input-border-hover: var(--color-border-muted);
		--input-border-focus: var(--brand-secondary);
		--input-border-invalid: rgb(var(--args-warm-redish-brown));
		--input-placeholder: var(--color-text-soft);
		--input-valid-ring: var(--status-success-ring);
		--input-warning-ring: var(--status-warning-ring);
		--input-error-ring: var(--status-error-ring);

		/** CARD TOKENS */
		--card-fg: var(--color-text);
		--card-bg: var(--color-surface);
		--card-bg-hover: var(--color-surface-muted);
		--card-border: var(--color-border);
		--card-shadow: rgb(var(--depth-soft-charcoal));

		/** FONT FAMILY MAPPINGS */
		--font-sans: var(--text-body);
		--font-display: var(--text-display);
		--font-serif: var(--text-title);
		--font-mono: var(--text-caption);
		--font-slab: var(--text-accent);
		--font-condensed: var(--text-heavy);
		--font-rounded: var(--text-soft);
		--font-code: var(--text-code);

		/** TYPOGRAPHY SCALE */
		--text-xxl: var(--text-size-xxl);
		--text-xl: var(--text-size-xl);
		--text-lg: var(--text-size-lg);
		--text-md: var(--text-size-md);
		--text-sm: var(--text-size-sm);
		--text-xs: var(--text-size-xs);
		--text-xxs: var(--text-size-xxs);

		/** LINE HEIGHT MAPPINGS */
		--leading-xxl: var(--line-height-xxl);
		--leading-xl: var(--line-height-xl);
		--leading-lg: var(--line-height-lg);
		--leading-md: var(--line-height-md);
		--leading-sm: var(--line-height-sm);
		--leading-xs: var(--line-height-xs);

		/** LETTER SPACING MAPPINGS */
		--tracking-xxl: var(--letter-spacing-xxl);
		--tracking-lg: var(--letter-spacing-lg);
		--tracking-md: var(--letter-spacing-md);
		--tracking-sm: var(--letter-spacing-sm);
		--tracking-xs: var(--letter-spacing-xs);
		--tracking-xxs: var(--letter-spacing-xxs);
	}
}

@layer base {
	::before,
	::after,
	* {
		box-sizing: border-box;
	}
	:root {
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		text-rendering: geometricPrecision;
		font-family: var(--text-body);
		font-size: var(--text-size-sm);
		line-height: var(--line-height-md);
		letter-spacing: var(--letter-spacing-md);
		color: var(--color-text);
		background: var(--color-canvas);
	}
	html,
	body {
		overflow-x: hidden;
		padding: unset;
		margin: unset;
	}
	::selection {
		color: var(--selection-fg);
		background: var(--selection-bg);
	}
	:focus-visible {
		outline: 2px solid var(--focus-ring);
		outline-offset: 2px;
	}
	[aria-invalid="true" i],
	:invalid {
		border-color: var(--input-border-invalid);
	}
	[aria-disabled="true" i],
	:disabled {
		filter: brightness(0.8) grayscale(0.96) opacity(0.64);
		cursor: not-allowed;
	}
	[aria-busy="true" i],
	[inert] {
		user-select: none;
		filter: grayscale(0.36) opacity(0.12);
	}
	[role="banner" i] {
		background-color: var(--color-canvas);
	}
}

@layer components {
	.scrollbar-minimal {
		scrollbar-width: none; /*? FF */
		-ms-overflow-style: none; /*? IE */
		position: relative;
	}
	.scrollbar-minimal::-webkit-scrollbar {
		display: none; /*? Webkit */
	}
	.scrollbar-minimal-track {
		position: relative;
		margin-top: 1.5rem;
		margin-inline: auto;
		inline-size: 72%;
		block-size: 0.25rem;
		background: rgb(0 0 0 / 10%);
		border-radius: 2px;
	}
	.scrollbar-minimal-thumb {
		position: absolute;
		top: 0;
		left: 0;
		block-size: 100%;
		min-inline-size: 2rem;
		background: var(--brand-tertiary);
		border-radius: 2px;
		cursor: grab;
		transition:
			background 0.24s,
			transform 0.12s;

		&:hover {
			background: var(--brand-primary);
		}

		&:active {
			cursor: grabbing;
			transform: scaleY(1.5);
		}
	}
	global-nav :is(button, a, :any-link) {
		text-transform: uppercase;
		letter-spacing: var(--letter-spacing-lg);
		font-weight: 600;
	}
}

@layer utilities {
	.bg-primary {
		background-color: var(--brand-primary);
	}
	.bg-secondary {
		background-color: var(--brand-secondary);
	}
	.bg-accent {
		background-color: var(--brand-tertiary);
	}
	.bg-muted {
		background-color: var(--color-surface-muted);
	}
	.bg-canvas {
		background-color: var(--color-canvas);
	}
	.bg-surface {
		background-color: var(--color-surface);
	}
	.bg-depth-1 {
		background-color: var(--color-surface-muted);
	}
	.bg-depth-2 {
		background-color: var(--color-surface-soft);
	}
	.bg-inverse {
		background-color: var(--brand-primary);
	}
	.text-primary {
		color: var(--brand-primary);
	}
	.text-secondary {
		color: var(--brand-secondary);
	}
	.text-accent {
		color: var(--brand-tertiary);
	}
	.text-muted {
		color: var(--color-text-muted);
	}
	.text-canvas {
		color: var(--color-text);
	}
	.text-inverse {
		color: var(--color-canvas);
	}
	.border-primary {
		border-color: var(--brand-primary);
	}
	.border-secondary {
		border-color: var(--brand-secondary);
	}
	.border-accent {
		border-color: var(--brand-tertiary);
	}
	.border-muted {
		border-color: var(--color-border-muted);
	}
	.border-strong {
		border-color: var(--color-border-muted);
	}
	.ring-primary {
		--tw-ring-color: var(--brand-primary);
	}
	.ring-secondary {
		--tw-ring-color: var(--brand-secondary);
	}
	.ring-accent {
		--tw-ring-color: var(--brand-tertiary);
	}
	.bg-status-error {
		background-color: var(--status-error-bg);
	}
	.bg-status-info {
		background-color: var(--status-info-bg);
	}
	.bg-status-success {
		background-color: var(--status-success-bg);
	}
	.bg-status-warning {
		background-color: var(--status-warning-bg);
	}
	.text-status-error,
	.text-badge-error {
		color: var(--status-error-text);
	}
	.text-status-info,
	.text-badge-info {
		color: var(--status-info-text);
	}
	.text-status-success,
	.text-badge-success {
		color: var(--status-success-text);
	}
	.text-status-warning,
	.text-badge-warning {
		color: var(--status-warning-text);
	}
	.border-status-error {
		border-color: var(--status-error-border);
	}
	.border-status-info {
		border-color: var(--status-info-border);
	}
	.border-status-success {
		border-color: var(--status-success-border);
	}
	.border-status-warning {
		border-color: var(--status-warning-border);
	}
	.ring-status-error {
		--tw-ring-color: var(--status-error-ring);
	}
	.ring-status-info {
		--tw-ring-color: var(--status-info-ring);
	}
	.ring-status-success {
		--tw-ring-color: var(--status-success-ring);
	}
	.ring-status-warning {
		--tw-ring-color: var(--status-warning-ring);
	}
	.btn-solid {
		color: var(--color-canvas);
		background: var(--brand-primary);
		border-color: var(--brand-primary);
	}
	.btn-solid:hover {
		background: var(--brand-primary-muted);
	}
	.btn-solid:active {
		background: var(--brand-primary-soft);
	}
	.btn-solid:disabled {
		background: var(--color-border-muted);
	}
	.btn-outline {
		color: var(--brand-primary);
		background: transparent;
		border-color: var(--brand-primary);
	}
	.btn-outline:hover {
		border-color: var(--brand-primary-muted);
		background: var(--brand-primary-muted);
		color: var(--color-canvas);
	}
	.btn-outline:active {
		border-color: var(--brand-primary-soft);
		background: var(--color-border-muted);
		color: var(--color-canvas);
		opacity: 0.64;
	}
	.btn-outline:disabled {
		background: var(--color-border-muted);
		color: var(--color-canvas);
		filter: brightness(0.8) opacity(0.48) grayscale(1);
		outline: 2px dashed var(--color-border-muted);
		outline-offset: 2px;
	}
	.btn-subtle {
		color: var(--color-text);
		background: var(--color-surface-muted);
	}
	.btn-subtle:hover {
		background: var(--color-surface-soft);
	}
	.btn-subtle:active {
		background: var(--color-surface);
	}
	.btn-subtle:disabled {
		background: var(--color-border-soft);
		color: var(--color-text-muted);
		filter: brightness(0.8) opacity(0.48) grayscale(1);
		outline: 2px dashed var(--color-border-muted);
		outline-offset: 2px;
	}
	.input-fg {
		color: var(--color-text);
	}
	.input-bg {
		background: var(--color-canvas);
	}
	.input-border {
		border-color: var(--brand-secondary);
	}
	.input-border-hover:hover {
		border-color: var(--brand-secondary-muted);
	}
	.input-focus:focus {
		outline-color: var(--brand-primary);
	}
	.placeholder-muted::placeholder {
		color: var(--color-text-soft);
	}
	.card-fg {
		color: var(--color-text);
	}
	.card-bg {
		background: var(--color-surface-muted);
	}
	.card-bg-hover:hover {
		background: var(--color-surface-soft);
	}
	.card-border {
		border-color: var(--color-border-soft);
	}
	.card-shadow {
		box-shadow: 0 2px 4px var(--card-shadow);
	}
}
